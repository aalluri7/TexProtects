<!DOCTYPE html>

<!--
  Copyright 2011 Google Inc. All Rights Reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<!-- Google fonts -->
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Raleway' rel='stylesheet' type='text/css'>

<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="radarChart.js"></script>	

<script src="Chart.js"></script>	
<script>
    $(document).ready(function () {
			
			var nativedatalist = !!('list' in document.createElement('input')) && 
            !!(document.createElement('datalist') && window.HTMLDataListElement);

        if (!nativedatalist) {
            $('input[list]').each(function () {
                var availableTags = $('#' + $(this).attr("list")).find('option').map(function () {
                    return this.value;
                }).get();
                $(this).autocomplete({ source: availableTags });
            });
        }
		
		$(".hide").hide();
		$("#moreinfo0").show();
		
		
        $('#search-string_0').keypress(function (e) {
            if (e.which == 13) {
                changeMap_0();
                return false; //<---- Add this line
            }
					
        });
			$( "#search-string_0" ).change(function() {
 changeMap_0();
});
        $('#adrsearch').keypress(function (e) {
            if (e.which == 13) {
                zoomto();
                return false; //<---- Add this line
            }
        });


    });
</script>
<style>
	.infotitle{
		color: rgb(0,0,0); 
		text-align: center; 
		
		width: 100%; 
		height: 100%;
		font-size: 20px;
		font-weight: bold;
		padding-bottom:10px;
		padding-top:10px;
	}
	#Relativeranking{
		font-weight: bold;
    font-size: 17px;
    color: black;
    text-align: center;
	}
	.diagrambox{
		border:1px solid black;
		
	}
	.diagramtitle{
		font-weight: bold;
		font-size: 16px;
		color: black;
		text-align: center;
		padding-bottom:20px
	}
	.hide{
		padding-bottom:15px;
	}
	.chartitle{
		font-weight: bold;
		font-size: 16px;
		color: black;
		text-align: center;
	}
	
	table {
            border-collapse: collapse;
            border: 1px black solid;
            font: 12px sans-serif;
			width: 100%;
			background-color: white;
        }
        th {
            border: 1px black solid;
            padding: 5px;
			width: 100%;
        }
        td {
            border: 1px black solid;
            padding: 5px;
			width: 100px;
        }
	
	.pleasedontfloat { 
    clear:both;
}
	.radarChart{
		width:400px;
		height:400px;
	}
	.tooltip {
				fill: #333333;
			}
	.data
	{
		clear: both;
    float: left;
    display: block;
    position: relative;
	}
	.content
	{
		 margin: auto;
    width: 90%;    
    
	}
    .inputdiv {
        padding-right: 10px;
        float: left;
    }
    
    #buttn {
			background-color: #336699;
    color: #FFFFFF;
			 text-decoration: none;
	}
    
    .inputtext {
			
        color: rgb(52, 73, 94);
        display: block;
        perspective-origin: 106.25px 21px;
        transform-origin: 106.25px 21px;
        border: 2px solid rgb(189, 195, 199);
        border-radius: 22px;
        font: normal normal normal normal 15px / 22.005px Lato, Helvetica, Arial, sans-serif;
        outline: rgb(52, 73, 94) none 0px;
        padding: 8px 12px;
        transition: border 0.25s linear 0s, color 0.25s linear 0s, background-color 0.25s linear 0s;
        text-align: center;
        background-color: #f0f0f0;
        float: left;
    }
    
    .dashbord {
        margin-left: 5%;
        padding-left: 5%;
    }
    
    .header {
        margin: auto;
        width: 60%;
        padding: 10px;
    }
    
    #mapbox {
        width: 600px;
		float:left;
    }
	#infoWindowDiv{
		float:left;
		width:420px;
	}
	
    

    
    .layer-wizard-search-label {
        font-family: sans-serif
    }
    
    ;
</style>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">

    <title>Fusion Tables Layer Example: Dynamic Styling with Legend</title>

    <link href="https://developers.google.com/fusiontables/docs/samples/style/default.css" rel="stylesheet" type="text/css">
    <style type="text/css">
        #legend {
            background-color:rgba(255, 255 ,255, 1);
            margin: 10px;
            padding: 5px;
            width: 150px;
					float:right;
        }
        
        #legend p {
            font-weight: bold;
            margin-top: 3px;
        }
        
        #legend div {
            clear: both;
        }
        
        .color {
            height: 12px;
            width: 12px;
            margin-right: 3px;
            float: left;
            display: block;
        }
    </style>
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false"></script>
	 <script type="text/javascript" src="https://gmaps-utility-gis.googlecode.com/svn/trunk/fusiontips/src/fusiontips.js"></script>
	

    <script type="text/javascript">
        /**
         * Column names mapped to a style rule.
         * @type {Object}
         * @const
         */
			curcounty = "";
			 tableurl = "1WGPWqU6Pfm6TDGGW4PGipR39sagWPf5zfDNtytkw";
			
		var rankings=	['Overall Risk Ranking','Poverty Ranking for Children < 18yrs',
									 'Poverty Ranking for Children < 5yrs',	'Teen Births Rating (15-19yrs)',	
									 'Substance Abuse Rating',	
									 'Child Abuse and Neglect Related Fatalities Rating',
			 'Substantiated Abuse Rating < 18yrs',	'Substantiated Abuse Rating < 5yrs'];
		 ranges =[{'min': 0,'max': 1935},{'min': 0,'max': 1834},{'min': 0,'max': 1756},{'min': 0,'max': 1602.5},{'min': 0,'max': 1911},{'min': 0,'max': 1839},{'min': 0,'max': 1884},{'min': 0,'max': 1865}];
		var colorgradiant =
											[
'#d7191c',
'#fdae61',
'#ffffbf',
'#a6d96a',
'#1a9641'
											];
colorgradiant.reverse();










var colors = ['#ffffb2',
'#fed976',
'#feb24c',
'#fd8d3c',
'#f03b20',
'#bd0026']
			var n = colorgradiant.length+1;
			var COLUMN_STYLES = {};
for (i = 0; i < rankings.length; i++) 
{ 
   COLUMN_STYLES[rankings[i]] = [];
			COLUMN_STYLES[rankings[i]].push({'min':-50,'max':-.5,'color':'#696969' });
    for (j = 0; j < n-1; j++)
    COLUMN_STYLES[rankings[i]].push({'min':Math.floor(ranges[i].max/(n-1)*(j)),'max':Math.floor(ranges[i].max/(n-1)*(j+1)),'color':colorgradiant[j] });
	
}
			
			console.log(COLUMN_STYLES );
			console.log(JSON.stringify(COLUMN_STYLES) );
		

		//COLUMN_STYLES =	{"Final Risk Ranking":[{"min":1759,"max":1935,"color":"#a50026"},{"min":1583,"max":1759,"color":"#d73027"},{"min":1407,"max":1583,"color":"#f46d43"},{"min":1231,"max":1407,"color":"#fdae61"},{"min":1055,"max":1231,"color":"#fee08b"},{"min":879,"max":1055,"color":"#d9ef8b"},{"min":703,"max":879,"color":"#a6d96a"},{"min":527,"max":703,"color":"#66bd63"},{"min":351,"max":527,"color":"#1a9850"},{"min":175,"max":351,"color":"#006837"}],"Poverty Ranking for Children < 18":[{"min":1667,"max":1834,"color":"#a50026"},{"min":1500,"max":1667,"color":"#d73027"},{"min":1333,"max":1500,"color":"#f46d43"},{"min":1167,"max":1333,"color":"#fdae61"},{"min":1000,"max":1167,"color":"#fee08b"},{"min":833,"max":1000,"color":"#d9ef8b"},{"min":666,"max":833,"color":"#a6d96a"},{"min":500,"max":666,"color":"#66bd63"},{"min":333,"max":500,"color":"#1a9850"},{"min":166,"max":333,"color":"#006837"}],"Poverty Ranking for Children < 5":[{"min":1596,"max":1756,"color":"#a50026"},{"min":1436,"max":1596,"color":"#d73027"},{"min":1277,"max":1436,"color":"#f46d43"},{"min":1117,"max":1277,"color":"#fdae61"},{"min":957,"max":1117,"color":"#fee08b"},{"min":798,"max":957,"color":"#d9ef8b"},{"min":638,"max":798,"color":"#a6d96a"},{"min":478,"max":638,"color":"#66bd63"},{"min":319,"max":478,"color":"#1a9850"},{"min":159,"max":319,"color":"#006837"}],"Teen Birth Ranking (15-19yrs)":[{"min":1456,"max":1602,"color":"#a50026"},{"min":1311,"max":1456,"color":"#d73027"},{"min":1165,"max":1311,"color":"#f46d43"},{"min":1019,"max":1165,"color":"#fdae61"},{"min":874,"max":1019,"color":"#fee08b"},{"min":728,"max":874,"color":"#d9ef8b"},{"min":582,"max":728,"color":"#a6d96a"},{"min":437,"max":582,"color":"#66bd63"},{"min":291,"max":437,"color":"#1a9850"},{"min":145,"max":291,"color":"#006837"}],"Substance Abuse Ranking":[{"min":1737,"max":1911,"color":"#a50026"},{"min":1563,"max":1737,"color":"#d73027"},{"min":1389,"max":1563,"color":"#f46d43"},{"min":1216,"max":1389,"color":"#fdae61"},{"min":1042,"max":1216,"color":"#fee08b"},{"min":868,"max":1042,"color":"#d9ef8b"},{"min":694,"max":868,"color":"#a6d96a"},{"min":521,"max":694,"color":"#66bd63"},{"min":347,"max":521,"color":"#1a9850"},{"min":173,"max":347,"color":"#006837"}],"Child Abuse and Neglect Related Fatalities Ranking":[{"min":1671,"max":1839,"color":"#a50026"},{"min":1504,"max":1671,"color":"#d73027"},{"min":1337,"max":1504,"color":"#f46d43"},{"min":1170,"max":1337,"color":"#fdae61"},{"min":1003,"max":1170,"color":"#fee08b"},{"min":835,"max":1003,"color":"#d9ef8b"},{"min":668,"max":835,"color":"#a6d96a"},{"min":501,"max":668,"color":"#66bd63"},{"min":334,"max":501,"color":"#1a9850"},{"min":167,"max":334,"color":"#006837"}],"Substantiated Child Abuse Ranking < 18":[{"min":1712,"max":1884,"color":"#a50026"},{"min":1541,"max":1712,"color":"#d73027"},{"min":1370,"max":1541,"color":"#f46d43"},{"min":1198,"max":1370,"color":"#fdae61"},{"min":1027,"max":1198,"color":"#fee08b"},{"min":856,"max":1027,"color":"#d9ef8b"},{"min":685,"max":856,"color":"#a6d96a"},{"min":513,"max":685,"color":"#66bd63"},{"min":342,"max":513,"color":"#1a9850"},{"min":171,"max":342,"color":"#006837"}],"Substantiated Child Abuse Ranking < 6":[{"min":1695,"max":1864,"color":"#a50026"},{"min":1525,"max":1695,"color":"#d73027"},{"min":1356,"max":1525,"color":"#f46d43"},{"min":1186,"max":1356,"color":"#fdae61"},{"min":1017,"max":1186,"color":"#fee08b"},{"min":847,"max":1017,"color":"#d9ef8b"},{"min":678,"max":847,"color":"#a6d96a"},{"min":508,"max":678,"color":"#66bd63"},{"min":339,"max":508,"color":"#1a9850"},{"min":169,"max":339,"color":"#006837"}]};
			
      /* var COLUMN_STYLES = {
            'Final Risk Ranking': [{
                'min': 4,
                'max': 326,
                'color': '#ffffb2'
            }, {
                'min': 326,
                'max': 648,
                'color': '#fed976'
            }, {
                'min': 648,
                'max': 970,
                'color': '#feb24c'
            }, {
                'min': 970,
                'max': 1292,
                'color': '#fd8d3c'
            }, {
                'min': 1292,
                'max': 1614,
                'color': '#f03b20'
            }, {
                'min': 1614,
                'max': 1936,
                'color': '#bd0026'
            }],
           
            'Poverty Ranking for Children  < 18': [{
                'min': 85,
                'max': 375,
                'color': '#ffffb2'
            }, {
                'min': 375,
                'max': 667,
                'color': '#fed976'
            }, {
                'min': 667,
                'max': 959,
                'color': '#feb24c'
            }, {
                'min': 959,
                'max': 1251,
                'color': '#fd8d3c'
            }, {
                'min': 1251,
                'max': 1543,
                'color': '#f03b20'
            }, {
                'min': 1543,
                'max': 1835,
                'color': '#bd0026'
            }],
            'Poverty Ranking for Children < 5': [{
                'min': 119,
                'max': 392,
                'color': '#ffffb2'
            }, {
                'min': 392,
                'max': 665,
                'color': '#fed976'
            }, {
                'min': 665,
                'max': 938,
                'color': '#feb24c'
            }, {
                'min': 938,
                'max': 1211,
                'color': '#fd8d3c'
            }, {
                'min': 1211,
                'max': 1484,
                'color': '#f03b20'
            }, {
                'min': 1484,
                'max': 1757,
                'color': '#bd0026'
            }],
            'Substance Abuse Ranking': [{
                'min': 226,
                'max': 507,
                'color': '#ffffb2'
            }, {
                'min': 507,
                'max': 788,
                'color': '#fed976'
            }, {
                'min': 788,
                'max': 1069,
                'color': '#feb24c'
            }, {
                'min': 1069,
                'max': 1350,
                'color': '#fd8d3c'
            }, {
                'min': 1350,
                'max': 1631,
                'color': '#f03b20'
            }, {
                'min': 1631,
                'max': 1912,
                'color': '#bd0026'
            }]

        };
				*/

			
			
        function initialize() {
            geocoder = new google.maps.Geocoder();
            map = new google.maps.Map(document.getElementById('map-canvas'), {
                center: new google.maps.LatLng(31.1, -100),
                zoom: 6,
							streetViewControl: false,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            layer = new google.maps.FusionTablesLayer({
                suppressInfoWindows: true,
                query: {
                    select: 'geometry',
                    from: tableurl

                }
            });
						
					
            layer.setMap(map);
					layer.enableMapTips({
        //a valid key with enabled FusionTables API for the project
        key: 'AIzaSyABWjPP41E6ZW0_Ay3xaBSqwqhRKwk48-c',
        select: "ZCTA",
        from: tableurl,
        geometryColumn: "geometry",
        delay: 50,
        style: {padding:'4px',color:'black',fontSize:'1.2em'}
    });

            initSelectmenu();
            for (column in COLUMN_STYLES) {
                break;
            }
            applyStyle(map, layer, column);
            addLegend(map);

            google.maps.event.addDomListener(document.getElementById('selector'),
                'change',
                function () {
                    var selectedColumn = this.value;
                    applyStyle(map, layer, selectedColumn);
                    updateLegend(selectedColumn);
							
							
							displaytable(selectedColumn);
							
							
							
                });
            google.maps.event.addListener(layer, "click", function (e) {
				
				
				 document.getElementById("chartzip").innerHTML = 'ZIP code : ' + e.row['ZCTA'].value ;
							var counties = e.row['Corresponding Counties'].value.split(";");
							var rankings = e.row['Relative County Rank'].value.split(";");
							var relrankings = [] ;
								for (var i = 0; i < counties.length; i++) {
     relrankings.push(rankings[i]+"th in "+counties[i]);
 }
							
							
               // document.getElementById("Relativeranking").innerHTML = " County Ranking :  "+relrankings.join();
							
				//this.setOptions({fillColor: 'green'});
				
							
								////////////////////////////////////////////////////////////// 
			//////////////////////// Set-Up ////////////////////////////// 
			////////////////////////////////////////////////////////////// 

			var margin = {top: 60, right: 60, bottom: 100, left: 60},
				width = 250,
				height = 250;
					
			////////////////////////////////////////////////////////////// 
			////////////////////////// Data ////////////////////////////// 
			////////////////////////////////////////////////////////////// 

				var chartvar = ["Poverty Ranking for Children < 18yrs",
						 "Poverty Ranking for Children < 5yrs",
						 "Teen Births Rating (15-19yrs)",
						 "Substantiated Abuse Rating < 18yrs", 
						 "Substantiated Abuse Rating < 5yrs",
						 "Substance Abuse Rating",
						 "Child Abuse and Neglect Related Fatalities Rating"];
		/*	var data = [];
			for(var i in chartvar)
				{
					data.push(	{axis:i,value:100})
				}*/
			//var info =  [368, 440, 425.5, 455, 651.5, 454, 639] ;
			var data = [
					  [//iPhone
						{axis:chartvar[0],value:Math.floor(e.row[chartvar[0]].value)},
						{axis:chartvar[1],value:Math.floor(e.row[chartvar[1]].value)},
						{axis:chartvar[2],value:Math.floor(e.row[chartvar[2]].value)},
						{axis:chartvar[3],value:Math.floor(e.row[chartvar[3]].value)},
						{axis:chartvar[4],value:Math.floor(e.row[chartvar[4]].value)},
						{axis:chartvar[5],value:Math.floor(e.row[chartvar[5]].value)},
						{axis:chartvar[6],value:Math.floor(e.row[chartvar[6]].value)}
					//	{axis:"To Be A Smartphone",value:0.50}			
					  ]
					];
							console.log(data);
			////////////////////////////////////////////////////////////// 
			//////////////////// Draw the Chart ////////////////////////// 
			////////////////////////////////////////////////////////////// 

			var color = d3.scale.ordinal()
				.range(["#9DC98A"]);
				
			var radarChartOptions = {
			  w: width,
			  h: height,
			  margin: margin,
			  maxValue: 1900,
			  levels: 4,
			  roundStrokes: true,
			  color: color
			};
			//Call function to draw the Radar chart
			RadarChart(".radarChart", data, radarChartOptions);
				
							
							/*		var chartvar = ["Poverty Ranking for Children < 18yrs",
						 "Poverty Ranking for Children < 5yrs",
						 "Teen Births Rating (15-19yrs)",
						 "Substantiated Abuse Rating < 18yrs", 
						 "Substantiated Abuse Rating < 5yrs",
						 "Substance Abuse Rating",
						 "Child Abuse and Neglect Related Fatalities Rating"];
							
							myRadarChart.datasets[0].points[0].value = e.row[chartvar[0]].value;
							myRadarChart.datasets[0].points[1].value = e.row[chartvar[1]].value;
							myRadarChart.datasets[0].points[2].value = e.row[chartvar[2]].value;
							myRadarChart.datasets[0].points[3].value = e.row[chartvar[3]].value;
							myRadarChart.datasets[0].points[4].value = e.row[chartvar[4]].value;
							myRadarChart.datasets[0].points[5].value = e.row[chartvar[5]].value;
							myRadarChart.datasets[0].points[6].value = e.row[chartvar[6]].value;
							*/
							
							
// Would update the first dataset's value of 'Sleeping' to be 50
//myRadarChart.update();
// Calling update now animates the position of Sleeping from 90 to 50.
				
		//		['Overall Risk Ranking','Poverty Ranking for Children < 18yrs',	'Poverty Ranking for Children < 5yrs',	'Teen Births Rating (15-19yrs)',	'Substance Abuse Rating',	'Child Abuse and Neglect Related Fatalities Rating',
			// 'Substantiated Abuse Rating < 18yrs',	'Substantiated Abuse Rating < 5yrs'];
				
	var myTableDiv = document.getElementById("moreinfo0");
				$( "#moreinfo0" ).empty();
							var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= 'Overall Risk Ranking'+": "+(e.row['Overall Risk Ranking'].value=="-1"?"NA":(e.row['Overall Risk Ranking'].value+" out of "+ ranges[0].max));
								myTableDiv.appendChild(subtitle);
    
							var myTableDiv = document.getElementById("moreinfo1");
				$( "#moreinfo1" ).empty();
							var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[0]+": "+(e.row[chartvar[0]].value=="-1"?"NA":(e.row[chartvar[0]].value+" out of "+ ranges[1].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Total Children in Poverty < 18yrs"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Child Poverty < 18yrs"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Total Children in Poverty < 18yrs'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Average Child Poverty < 18yrs'].value));
            tr.appendChild(td);
							
		myTableDiv.appendChild(table);
							
				
		var myTableDiv = document.getElementById("moreinfo2");
				$( "#moreinfo2" ).empty();
							var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[1]+": "+(e.row[chartvar[1]].value=="-1"?"NA":(e.row[chartvar[1]].value+" out of "+ ranges[2].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Total Children is Poverty < 5yrs"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Child Poverty < 5yrs"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Total Children is Poverty < 5yrs'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Average Child Poverty < 5yrs'].value));
            tr.appendChild(td);
		myTableDiv.appendChild(table);		
				

				
		var myTableDiv = document.getElementById("moreinfo3");
				$( "#moreinfo3" ).empty();
							var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[2]+": "+(e.row[chartvar[2]].value=="-1"?"NA":(e.row[chartvar[2]].value+" out of "+ ranges[3].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Total Female Population (15-19yrs)"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Teen Birth(15-19yrs)"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Total Female Population (15-19yrs)'].value=="-1"?"NA":e.row['Total Female Population (15-19yrs)'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode((e.row['Average Teen Birth(15-19yrs)'].value=="-100.00%")?"NA":e.row['Average Teen Birth(15-19yrs)'].value));
            tr.appendChild(td);
		myTableDiv.appendChild(table);	
				
		var myTableDiv = document.getElementById("moreinfo4");
				$( "#moreinfo4" ).empty();
							var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[3]+": "+(e.row[chartvar[3]].value=="-1"?"NA":(e.row[chartvar[3]].value+" out of "+ ranges[6].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Total Substantiated < 18yrs"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Substantiated Cases < 18yrs"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Total Substantiated < 18yrs'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Average Substantiated Cases < 18yrs'].value));
            tr.appendChild(td);
		myTableDiv.appendChild(table);	
				
var myTableDiv = document.getElementById("moreinfo5");
				$( "#moreinfo5" ).empty();
							var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[4]+": "+(e.row[chartvar[4]].value=="-1"?"NA":(e.row[chartvar[4]].value+" out of "+ ranges[7].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Total Substantiated < 5yrs"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Substantiated Cases <5 yrs"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Total Substantiated < 5yrs'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Average Substantiated Cases <5 yrs'].value));
            tr.appendChild(td);
		myTableDiv.appendChild(table);					
				
	var myTableDiv = document.getElementById("moreinfo6");
				$( "#moreinfo6" ).empty();
								var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[5]+": "+(e.row[chartvar[5]].value=="-1"?"NA":(e.row[chartvar[5]].value+" out of "+ ranges[4].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Number of state funded substance abuse service types utilized by individuals"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Substance Abuse Treatment"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Number of state funded substance abuse service types utilized by individuals'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Average Substance Abuse Treatment'].value));
            tr.appendChild(td);
		myTableDiv.appendChild(table);				
				
				
var myTableDiv = document.getElementById("moreinfo7");
				$( "#moreinfo7" ).empty();
								var subtitle = document.createElement('div');
							subtitle.className = "chartitle";
							subtitle.innerHTML= chartvar[6]+": "+(e.row[chartvar[6]].value=="-1"?"NA":(e.row[chartvar[6]].value+" out of "+ ranges[5].max));
								myTableDiv.appendChild(subtitle);
    var table = document.createElement('TABLE');
    var tableBody = document.createElement('TBODY');
    table.appendChild(tableBody);

    
        var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Child Abuse and Neglect Related Fatalities (2010-2014)"));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode("Average Child Abuse and Neglect Related Fatalities < 18yrs"));
            tr.appendChild(td);
				
		var tr = document.createElement('TR');
        tableBody.appendChild(tr);

        
            var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Child Abuse and Neglect Related Fatalities (2010-2014)'].value));
            tr.appendChild(td);
				
			var td = document.createElement('TD');            
            td.appendChild(document.createTextNode(e.row['Average Child Abuse and Neglect Related Fatalities < 18yrs'].value));
            tr.appendChild(td);
		myTableDiv.appendChild(table);					
				
            });
        }
        var zoomToAddress = function (address,zoomlevel) {

            geocoder.geocode({
                address: address
            }, function (results, status) {

                if (status == google.maps.GeocoderStatus.OK) {
                    if (address == "county texas") {
                        resetmap();
                    } else {
                        map.setCenter(results[0].geometry.location);
                        map.setZoom(zoomlevel);
                    }


                   
                } else {
                    window.alert('Address could not be geocoded: ' + status);
                }
            });
        };


        // Initialize the drop-down menu
        function initSelectmenu() {
            var selectMenu = document.getElementById('selector');
            for (column in COLUMN_STYLES) {
                var option = document.createElement('option');
                option.setAttribute('value', column);
                option.innerHTML = column;
                selectMenu.appendChild(option);
            }
        }

        // Apply the style to the layer & generate corresponding legend
       function applyStyle(map, layer, column) {
        var columnStyle = COLUMN_STYLES[column];
        var styles = [];

        for (var i in columnStyle) {
          var style = columnStyle[i];
          styles.push({
            where: generateWhere(column, style.min, style.max),
            polygonOptions: {
              fillColor: style.color,
              fillOpacity: style.opacity ? style.opacity : 0.8
            }
          });
        }

        layer.set('styles', styles);
				 console.log(styles);
      }

      // Create the where clause
      function generateWhere(columnName, low, high) {
        var whereClause = [];
        whereClause.push("'");
        whereClause.push(columnName);
        whereClause.push("' >= ");
        whereClause.push(low);
        whereClause.push(" AND '");
        whereClause.push(columnName);
        whereClause.push("' < ");
        whereClause.push(high);
        return whereClause.join('');
      }

        // Initialize the legend
        function addLegend(map) {
            var legendWrapper = document.createElement('div');
            legendWrapper.id = 'legendWrapper';
            legendWrapper.index = 1;
            map.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(
                legendWrapper);
            legendContent(legendWrapper, column);
        }

        // Update the legend content
        function updateLegend(column) {
            var legendWrapper = document.getElementById('legendWrapper');
            var legend = document.getElementById('legend');
            legendWrapper.removeChild(legend);
            legendContent(legendWrapper, column);
        }

        function changeMap_0() {
            var whereClause;
            var searchString = document.getElementById('search-string_0').value.replace(/'/g, "\\'");
            if (searchString != '--Select--') {
                whereClause = "'Corresponding Counties' CONTAINS IGNORING CASE '" + searchString + "'";
                zoomToAddress(document.getElementById('search-string_0').value + "county texas",9);
            }
            layer.setOptions({
                query: {
                    select: "col7>>1",
                    from: tableurl,
                    where: whereClause
                }
            });
					curcounty = document.getElementById('search-string_0').value;
					
        }

        function zoomto() {
            zoomToAddress(document.getElementById('adrsearch').value,11);
        }

        function resetmap() {

            map.setCenter(new google.maps.LatLng(31.1, -100));
            map.setZoom(6);
					//window.location.reload();


        }
			function refreshmap(){
				document.getElementById('search-string_0').value="";
				changeMap_0();
			}

        // Generate the content for the legend
        function legendContent(legendWrapper, column) {
            var legend = document.createElement('div');
            legend.id = 'legend';

            var title = document.createElement('p');
            title.innerHTML = column;
            legend.appendChild(title);
					
					var risktop = document.createElement('b');
            risktop.innerHTML = "High risk";
            legend.appendChild(risktop);
						
            var columnStyle = COLUMN_STYLES[column];
					columnStyle.reverse();
					for (var i = 0; i < columnStyle.length-1; i++){
                var style = columnStyle[i];

                var legendItem = document.createElement('div');

                var color = document.createElement('span');
                color.setAttribute('class', 'color');
                color.style.backgroundColor = style.color;
                legendItem.appendChild(color);

                var minMax = document.createElement('span');
                minMax.innerHTML = style.min + ' - ' + style.max;
                legendItem.appendChild(minMax);
							
							
                legend.appendChild(legendItem);
            }
					
					
					
					var style = columnStyle[i];

                var legendItem = document.createElement('div');

                var color = document.createElement('span');
                color.setAttribute('class', 'color');
                color.style.backgroundColor = style.color;
                legendItem.appendChild(color);

                var minMax = document.createElement('span');
                minMax.innerHTML = 'No Data';
                legendItem.appendChild(minMax);
							
							
                legend.appendChild(legendItem);
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					
					columnStyle.reverse();
					var riskbotm = document.createElement('b');
            riskbotm.innerHTML = "Low risk";
            legend.appendChild(riskbotm);

            legendWrapper.appendChild(legend);
        }
		function displaytable(data) {
			$(".hide").hide();
			
			var labels = ["Poverty Ranking for Children < 18yrs",
						 "Poverty Ranking for Children < 5yrs",
						 "Teen Births Rating (15-19yrs)",
						 "Substantiated Abuse Rating < 18yrs", 
						 "Substantiated Abuse Rating < 5yrs",
						 "Substance Abuse Rating",
						 "Child Abuse and Neglect Related Fatalities Rating",
										 "Overall Risk Ranking"];
			
			if(data==labels[7]){
				//$("#subtitle").text(labels[0]);
				$("#moreinfo0").show();
			}
			else if(data==labels[0]){
				//$("#subtitle").text(labels[0]);
				$("#moreinfo1").show();
			}
			else if(data==labels[1]){
				//$("#subtitle").text(labels[2]);
				$("#moreinfo2").show();
			}
			else if(data==labels[2]){
			//	$("#subtitle").text(labels[2]);
				$("#moreinfo3").show();
			}
			else if(data==labels[3]){
			//	$("#subtitle").text(labels[3]);
				$("#moreinfo4").show();
			}
			else if(data==labels[4]){
			//	$("#subtitle").text(labels[4]);
				$("#moreinfo5").show();
			}
			else if(data==labels[5]){
			//	$("#subtitle").text(labels[5]);
				$("#moreinfo6").show();
			}
			else if(data==labels[6]){
				//$("#subtitle").text(labels[6]);
				$("#moreinfo7").show();
			}
			
			
			
			
		
			
		
		}
		
			function viewdata(){
				
			//	var county = (curcounty=""||curcounty=null)?"Dallas":curcounty ;
					
 					 var win = window.open("papaparse.html?county="+curcounty, '_blank');
  					win.focus();				
			}
			function opeennewtab(x){
				
			//	var county = (curcounty=""||curcounty=null)?"Dallas":curcounty ;
					
 					 var win = window.open(x+curcounty, '_blank');
  					win.focus();				
			}
			

        google.maps.event.addDomListener(window, 'load', initialize);
		
    </script>
</head>

<body>
	<div class="content">
		<div class="header_wrapper"> 
        <div class="header">
            <img src="https://texprotects.org/media/images/logos.png">
            <img src="https://texprotects.org/media/images/texprotects.png">
        </div>
    </div>
        <div class="dashbord">

            <div class="widgetText" style="font:bold 32px helvetica;color:rgb(255, 127, 0); text-align:left;; line-height: 36px;;width:100%;height:100%;white-space:pre-wrap; ">TexProtects' 2015  Texas Child Maltreatment Interactive Risk Map</div>
            <div class="widgetText" style="font-style: normal; font-variant: normal; font-weight: normal; font-stretch: normal; font-size: 13px; line-height: 19px; font-family: helvetica; color: rgb(136, 136, 136); text-align: left; width: 100%; height: 100%; white-space: pre-wrap; display: block; padding-top: 0px; width: 1300px;">TexProtects has analyzed ZIP code level data from the U.S. Census Bureau, Texas Department of Family and Protective Services, and the Texas Department of State Health Services to develop a comprehensive child abuse and neglect risk assessment and ranking for all Texas zipcodes through the use of substantiated child maltreatment, child abuse and neglect related fatalities, teen birth, substance abuse, and child poverty rates. This interactive tool is meant to be a resource to community providers, decision makers, advocates, and the public-at-large to demonstrate the quantifiable need for more targeted investments in child abuse and neglect prevention services in Texas and to bring about more data-driven policies. </div>


            <div class="toolbar">
                <label class="layer-wizard-search-label">
                    <div class="inputdiv">
                        <div class="widgetText" style="font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 18px; font-family: helvetica; color: rgb(78, 75, 75); text-align: left; line-height: 21px; width: 100%; height: 100%; white-space: pre-wrap; padding-top: 0px;">Filter for a county :</div>
                        <input type="text" id="search-string_0" list="counties" class="inputtext" style="width: 162.5px;">
                        <input type="button" onclick="changeMap_0()" value="Go" class="inputtext" class="btn">
                    </div>

                    <div class="inputdiv">
                        <div class="widgetText" style="font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 18px; font-family: helvetica; color: rgb(78, 75, 75); text-align: left; line-height: 21px; width: 100%; height: 100%; white-space: pre-wrap; padding-top: 0px;">Zoom to location :</div>
                        <input type="text" id="adrsearch" class="inputtext" style="width: 162.5px;">
                        <input type="button" onclick="zoomto()" value="Go" class="inputtext" class="btn">
						
                    </div>
                    <div class="inputdiv">
                        <div class="widgetText" style="font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 18px; font-family: helvetica; color: rgb(78, 75, 75); text-align: left; line-height: 21px; width: 100%; height: 100%; white-space: pre-wrap; padding-top: 0px;">Risk Rankings :</div>
                        <select id="selector" class="inputtext"></select>
                    </div>
									<div class="inputdiv">
										<div class="widgetText" style="font-weight: bold; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 18px; font-family: helvetica; color: rgb(78, 75, 75); text-align: left; line-height: 21px; width: 100%; height: 100%; white-space: pre-wrap; padding-top: 0px;">  </div>
                       		<a onclick="viewdata()" class="inputtext" id="buttn">View Data</a>
										<a  onclick="opeennewtab('https://goo.gl/forms/hKtTN8oKDe')" class="inputtext" id="buttn">We value your feedback</a>
			
                    </div>
                    <datalist id="counties"> <option value="Anderson"> <option value="Andrews"> <option value="Angelina"> <option value="Aransas"> <option value="Archer"> <option value="Armstrong"> <option value="Atascosa"> <option value="Austin"> <option value="Bailey"> <option value="Bandera"> <option value="Bastrop"> <option value="Baylor"> <option value="Bee"> <option value="Bell"> <option value="Bexar"> <option value="Blanco"> <option value="Borden"> <option value="Bosque"> <option value="Bowie"> <option value="Brazoria"> <option value="Brazos"> <option value="Brewster"> <option value="Briscoe"> <option value="Brooks"> <option value="Brown"> <option value="Burleson"> <option value="Burnet"> <option value="Caldwell"> <option value="Calhoun"> <option value="Callahan"> <option value="Cameron"> <option value="Camp"> <option value="Carson"> <option value="Cass"> <option value="Castro"> <option value="Chambers"> <option value="Cherokee"> <option value="Childress"> <option value="Clay"> <option value="Cochran"> <option value="Coke"> <option value="Coleman"> <option value="Collin"> <option value="Collingsworth"> <option value="Colorado"> <option value="Comal"> <option value="Comanche"> <option value="Concho"> <option value="Cooke"> <option value="Coryell"> <option value="Cottle"> <option value="Crane"> <option value="Crockett"> <option value="Crosby"> <option value="Culberson"> <option value="Dallam"> <option value="Dallas"> <option value="Dawson"> <option value="DeWitt"> <option value="Deaf Smith"> <option value="Delta"> <option value="Denton"> <option value="Dickens"> <option value="Dimmit"> <option value="Donley"> <option value="Duval"> <option value="Eastland"> <option value="Ector"> <option value="Edwards"> <option value="Ellis"> <option value="El Paso"> <option value="Erath"> <option value="Falls"> <option value="Fannin"> <option value="Fayette"> <option value="Fisher"> <option value="Floyd"> <option value="Foard"> <option value="Fort Bend"> <option value="Franklin"> <option value="Freestone"> <option value="Frio"> <option value="Gaines"> <option value="Galveston"> <option value="Garza"> <option value="Gillespie"> <option value="Glasscock"> <option value="Goliad"> <option value="Gonzales"> <option value="Gray"> <option value="Grayson"> <option value="Gregg"> <option value="Grimes"> <option value="Guadalupe"> <option value="Hale"> <option value="Hall"> <option value="Hamilton"> <option value="Hansford"> <option value="Hardeman"> <option value="Hardin"> <option value="Harris"> <option value="Harrison"> <option value="Hartley"> <option value="Haskell"> <option value="Hays"> <option value="Hemphill"> <option value="Henderson"> <option value="Hidalgo"> <option value="Hill"> <option value="Hockley"> <option value="Hood"> <option value="Hopkins"> <option value="Houston"> <option value="Howard"> <option value="Hudspeth"> <option value="Hunt"> <option value="Hutchinson"> <option value="Irion"> <option value="Jack"> <option value="Jackson"> <option value="Jasper"> <option value="Jeff Davis"> <option value="Jefferson"> <option value="Jim Hogg"> <option value="Jim Wells"> <option value="Johnson"> <option value="Jones"> <option value="Karnes"> <option value="Kaufman"> <option value="Kendall"> <option value="Kenedy"> <option value="Kent"> <option value="Kerr"> <option value="Kimble"> <option value="King"> <option value="Kinney"> <option value="Kleberg"> <option value="Knox"> <option value="La Salle"> <option value="Lamar"> <option value="Lamb"> <option value="Lampasas"> <option value="Lavaca"> <option value="Lee"> <option value="Leon"> <option value="Liberty"> <option value="Limestone"> <option value="Lipscomb"> <option value="Live Oak"> <option value="Llano"> <option value="Loving"> <option value="Lubbock"> <option value="Lynn"> <option value="McCulloch"> <option value="McLennan"> <option value="McMullen"> <option value="Madison"> <option value="Marion"> <option value="Martin"> <option value="Mason"> <option value="Matagorda"> <option value="Maverick"> <option value="Medina"> <option value="Menard"> <option value="Midland"> <option value="Milam"> <option value="Mills"> <option value="Mitchell"> <option value="Montague"> <option value="Montgomery"> <option value="Moore"> <option value="Morris"> <option value="Motley"> <option value="Nacogdoches"> <option value="Navarro"> <option value="Newton"> <option value="Nolan"> <option value="Nueces"> <option value="Ochiltree"> <option value="Oldham"> <option value="Orange"> <option value="Palo Pinto"> <option value="Panola"> <option value="Parker"> <option value="Parmer"> <option value="Pecos"> <option value="Polk"> <option value="Potter"> <option value="Presidio"> <option value="Rains"> <option value="Randall"> <option value="Reagan"> <option value="Real"> <option value="Red River"> <option value="Reeves"> <option value="Refugio"> <option value="Roberts"> <option value="Robertson"> <option value="Rockwall"> <option value="Runnels"> <option value="Rusk"> <option value="Sabine"> <option value="San Augustine"> <option value="San Jacinto"> <option value="San Patricio"> <option value="San Saba"> <option value="Schleicher"> <option value="Scurry"> <option value="Shackelford"> <option value="Shelby"> <option value="Sherman"> <option value="Smith"> <option value="Somervell"> <option value="Starr"> <option value="Stephens"> <option value="Sterling"> <option value="Stonewall"> <option value="Sutton"> <option value="Swisher"> <option value="Tarrant"> <option value="Taylor"> <option value="Terrell"> <option value="Terry"> <option value="Throckmorton"> <option value="Titus"> <option value="Tom Green"> <option value="Travis"> <option value="Trinity"> <option value="Tyler"> <option value="Upshur"> <option value="Upton"> <option value="Uvalde"> <option value="Val Verde"> <option value="Van Zandt"> <option value="Victoria"> <option value="Walker"> <option value="Waller"> <option value="Ward"> <option value="Washington"> <option value="Webb"> <option value="Wharton"> <option value="Wheeler"> <option value="Wichita"> <option value="Wilbarger"> <option value="Willacy"> <option value="Williamson"> <option value="Wilson"> <option value="Winkler"> <option value="Wise"> <option value="Wood"> <option value="Yoakum"> <option value="Young"> <option value="Zapata"> <option value="Zavala"> </datalist>
			

                </label>
            </div>
                
            <div class="data">
				 <div id="mapbox">
                <div id="map-canvas" style="height:600px;     width: 98%;
    		"></div>
					 <input type="button" onClick="history.go(0)" id="resetbtn" value="reset" class="inputtext" class="btn">
					 <input type="button" onClick="window.print()"  value="Print" class="inputtext" class="btn">
					  <a onclick="opeennewtab('References.html')" class="inputtext" id="buttn" style="float:right;">References</a>
				
            </div>
				<div id="infoWindowDiv" class="dashitem">
					
					<div id="chartzip" class="infotitle">ZIP code : (Click on the map) </div>
					<div id="Relativeranking"  ></div>
					
									
					<div id="moreinfo0" class="hide">					
						
					</div>
					
					<div id="moreinfo1" class="hide">					
						
					</div>
					
					
					<div id="moreinfo2" class="hide">
						
					</div>
					<div id="moreinfo3" class="hide">
						
					</div>
					<div id="moreinfo4" class="hide">
					
					</div>
					<div id="moreinfo5" class="hide">
						
					</div>
					<div id="moreinfo6" class="hide">
						
					</div>
					<div id="moreinfo7" class="hide">
						
					</div>
					<div class="diagrambox">
					<div class="diagramtitle ">Risk Factors</div>
					<div class="radarChart "></div>
					</div>
					


		<script>
			////////////////////////////////////////////////////////////// 
			//////////////////////// Set-Up ////////////////////////////// 
			////////////////////////////////////////////////////////////// 

			var margin = {top: 60, right: 60, bottom: 100, left: 60},
				width = 250,
				height = 250;
					
			////////////////////////////////////////////////////////////// 
			////////////////////////// Data ////////////////////////////// 
			////////////////////////////////////////////////////////////// 

				var chartvar = ["Poverty Ranking for Children < 18yrs",
						 "Poverty Ranking for Children < 5yrs",
						 "Teen Births Rating (15-19yrs)",
						 "Substantiated Abuse Rating < 18yrs", 
						 "Substantiated Abuse Rating < 5yrs",
						 "Substance Abuse Rating",
						 "Child Abuse and Neglect Related Fatalities Rating"];
		/*	var data = [];
			for(var i in chartvar)
				{
					data.push(	{axis:i,value:100})
				}*/
			var info =  [368, 440, 425, 455, 651, 454, 639] ;
			var data = [
					  [//iPhone
						{axis:chartvar[0],value:info[0]},
						{axis:chartvar[1],value:info[1]},
						{axis:chartvar[2],value:info[2]},
						{axis:chartvar[3],value:info[3]},
						{axis:chartvar[4],value:info[4]},
						{axis:chartvar[5],value:info[5]},
						{axis:chartvar[6],value:info[6]}
					//	{axis:"To Be A Smartphone",value:0.50}			
					  ]
					];
			////////////////////////////////////////////////////////////// 
			//////////////////// Draw the Chart ////////////////////////// 
			////////////////////////////////////////////////////////////// 

			var color = d3.scale.ordinal()
				.range(["#9DC98A"]);
				
			var radarChartOptions = {
			  w: width,
			  h: height,
			  margin: margin,
			  maxValue: 1900,
			  levels: 4,
			  roundStrokes: true,
			  color: color
			};
			//Call function to draw the Radar chart
			RadarChart(".radarChart", data, radarChartOptions);
		</script>
					

					
					<script>
					/*	Chart.defaults.global.responsive = true;
					
						<canvas id="myChart" width="400" height="600"></canvas>
						
							var chartvar = ["Poverty Ranking for Children < 18yrs",
						 "Poverty Ranking for Children < 5yrs",
						 "Teen Births Rating (15-19yrs)",
						 "Substantiated Abuse Rating < 18yrs", 
						 "Substantiated Abuse Rating < 5yrs",
						 "Substance Abuse Rating",
						 "Child Abuse and Neglect Related Fatalities Rating"];
						
					var data = {
    labels: chartvar,
    datasets: [
        {
            label: "My First dataset",
            fillColor: "rgba(151,187,205,0.2)",
            strokeColor: "rgba(151,187,205,1)",
            pointColor: "rgba(151,187,205,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(151,187,205,1)",
						scaleShowLabels : false,
            data: [368, 440, 425.5, 455, 651.5, 454, 639]
        }
    ]
};
						
						
						
		var ctx = document.getElementById("myChart").getContext("2d");
var myRadarChart = new Chart(ctx).Radar(data,{pointLabelFontColor : "#000000",pointLabelFontSize: 10});
						
							var canvas = document.getElementById("myChart");
			canvas.onclick = function(evt){
    var activePoints = myRadarChart.getPointsAtEvent(evt);
							console.log(activePoints);
				console.log(activePoints[0].label);
				displaytable(activePoints[0].label);
    // => activePoints is an array of points on the canvas that are at the same position as the click event.
};
						*/
					</script>
		
					
            </div>
							
							
			
			</div>        

			
 </div>
</div>
    



</body>

</html>
